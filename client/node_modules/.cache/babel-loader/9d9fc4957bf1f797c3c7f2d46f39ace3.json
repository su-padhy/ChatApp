{"ast":null,"code":"/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/image/imageediting\n */\nimport { Plugin } from 'ckeditor5/src/core';\nimport ImageLoadObserver from './imageloadobserver';\nimport { viewFigureToModel, modelToViewAttributeConverter, srcsetAttributeConverter } from './converters';\nimport { toImageWidget } from './utils';\nimport InsertImageCommand from './insertimagecommand';\n/**\n * The image engine plugin.\n *\n * It registers:\n *\n * * `<image>` as a block element in the document schema, and allows `alt`, `src` and `srcset` attributes.\n * * converters for editing and data pipelines.\n * * `'insertImage'` command.\n * * `'imageInsert'` command as an alias for `insertImage` command.\n *\n * @extends module:core/plugin~Plugin\n */\n\nexport default class ImageEditing extends Plugin {\n  /**\n   * @inheritDoc\n   */\n  static get pluginName() {\n    return 'ImageEditing';\n  }\n  /**\n   * @inheritDoc\n   */\n\n\n  init() {\n    const editor = this.editor;\n    const schema = editor.model.schema;\n    const t = editor.t;\n    const conversion = editor.conversion; // See https://github.com/ckeditor/ckeditor5-image/issues/142.\n\n    editor.editing.view.addObserver(ImageLoadObserver); // Configure schema.\n\n    schema.register('image', {\n      isObject: true,\n      isBlock: true,\n      allowWhere: '$block',\n      allowAttributes: ['alt', 'src', 'srcset']\n    });\n    conversion.for('dataDowncast').elementToElement({\n      model: 'image',\n      view: (modelElement, {\n        writer\n      }) => createImageViewElement(writer)\n    });\n    conversion.for('editingDowncast').elementToElement({\n      model: 'image',\n      view: (modelElement, {\n        writer\n      }) => toImageWidget(createImageViewElement(writer), writer, t('image widget'))\n    });\n    conversion.for('downcast').add(modelToViewAttributeConverter('src')).add(modelToViewAttributeConverter('alt')).add(srcsetAttributeConverter());\n    conversion.for('upcast').elementToElement({\n      view: {\n        name: 'img',\n        attributes: {\n          src: true\n        }\n      },\n      model: (viewImage, {\n        writer\n      }) => writer.createElement('image', {\n        src: viewImage.getAttribute('src')\n      })\n    }).attributeToAttribute({\n      view: {\n        name: 'img',\n        key: 'alt'\n      },\n      model: 'alt'\n    }).attributeToAttribute({\n      view: {\n        name: 'img',\n        key: 'srcset'\n      },\n      model: {\n        key: 'srcset',\n        value: viewImage => {\n          const value = {\n            data: viewImage.getAttribute('srcset')\n          };\n\n          if (viewImage.hasAttribute('width')) {\n            value.width = viewImage.getAttribute('width');\n          }\n\n          return value;\n        }\n      }\n    }).add(viewFigureToModel());\n    const insertImageCommand = new InsertImageCommand(editor); // Register `insertImage` command and add `imageInsert` command as an alias for backward compatibility.\n\n    editor.commands.add('insertImage', insertImageCommand);\n    editor.commands.add('imageInsert', insertImageCommand);\n  }\n\n} // Creates a view element representing the image.\n//\n//\t\t<figure class=\"image\"><img></img></figure>\n//\n// Note that `alt` and `src` attributes are converted separately, so they are not included.\n//\n// @private\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\n// @returns {module:engine/view/containerelement~ContainerElement}\n\nexport function createImageViewElement(writer) {\n  const emptyElement = writer.createEmptyElement('img');\n  const figure = writer.createContainerElement('figure', {\n    class: 'image'\n  });\n  writer.insert(writer.createPositionAt(figure, 0), emptyElement);\n  return figure;\n}","map":{"version":3,"sources":["/Users/subhasis/Desktop/React/Citryl/client/node_modules/@ckeditor/ckeditor5-image/src/image/imageediting.js"],"names":["Plugin","ImageLoadObserver","viewFigureToModel","modelToViewAttributeConverter","srcsetAttributeConverter","toImageWidget","InsertImageCommand","ImageEditing","pluginName","init","editor","schema","model","t","conversion","editing","view","addObserver","register","isObject","isBlock","allowWhere","allowAttributes","for","elementToElement","modelElement","writer","createImageViewElement","add","name","attributes","src","viewImage","createElement","getAttribute","attributeToAttribute","key","value","data","hasAttribute","width","insertImageCommand","commands","emptyElement","createEmptyElement","figure","createContainerElement","class","insert","createPositionAt"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/image/imageediting\n */\n\nimport { Plugin } from 'ckeditor5/src/core';\nimport ImageLoadObserver from './imageloadobserver';\n\nimport {\n\tviewFigureToModel,\n\tmodelToViewAttributeConverter,\n\tsrcsetAttributeConverter\n} from './converters';\n\nimport { toImageWidget } from './utils';\n\nimport InsertImageCommand from './insertimagecommand';\n\n/**\n * The image engine plugin.\n *\n * It registers:\n *\n * * `<image>` as a block element in the document schema, and allows `alt`, `src` and `srcset` attributes.\n * * converters for editing and data pipelines.\n * * `'insertImage'` command.\n * * `'imageInsert'` command as an alias for `insertImage` command.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class ImageEditing extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'ImageEditing';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst editor = this.editor;\n\t\tconst schema = editor.model.schema;\n\t\tconst t = editor.t;\n\t\tconst conversion = editor.conversion;\n\n\t\t// See https://github.com/ckeditor/ckeditor5-image/issues/142.\n\t\teditor.editing.view.addObserver( ImageLoadObserver );\n\n\t\t// Configure schema.\n\t\tschema.register( 'image', {\n\t\t\tisObject: true,\n\t\t\tisBlock: true,\n\t\t\tallowWhere: '$block',\n\t\t\tallowAttributes: [ 'alt', 'src', 'srcset' ]\n\t\t} );\n\n\t\tconversion.for( 'dataDowncast' ).elementToElement( {\n\t\t\tmodel: 'image',\n\t\t\tview: ( modelElement, { writer } ) => createImageViewElement( writer )\n\t\t} );\n\n\t\tconversion.for( 'editingDowncast' ).elementToElement( {\n\t\t\tmodel: 'image',\n\t\t\tview: ( modelElement, { writer } ) => toImageWidget( createImageViewElement( writer ), writer, t( 'image widget' ) )\n\t\t} );\n\n\t\tconversion.for( 'downcast' )\n\t\t\t.add( modelToViewAttributeConverter( 'src' ) )\n\t\t\t.add( modelToViewAttributeConverter( 'alt' ) )\n\t\t\t.add( srcsetAttributeConverter() );\n\n\t\tconversion.for( 'upcast' )\n\t\t\t.elementToElement( {\n\t\t\t\tview: {\n\t\t\t\t\tname: 'img',\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tsrc: true\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmodel: ( viewImage, { writer } ) => writer.createElement( 'image', { src: viewImage.getAttribute( 'src' ) } )\n\t\t\t} )\n\t\t\t.attributeToAttribute( {\n\t\t\t\tview: {\n\t\t\t\t\tname: 'img',\n\t\t\t\t\tkey: 'alt'\n\t\t\t\t},\n\t\t\t\tmodel: 'alt'\n\t\t\t} )\n\t\t\t.attributeToAttribute( {\n\t\t\t\tview: {\n\t\t\t\t\tname: 'img',\n\t\t\t\t\tkey: 'srcset'\n\t\t\t\t},\n\t\t\t\tmodel: {\n\t\t\t\t\tkey: 'srcset',\n\t\t\t\t\tvalue: viewImage => {\n\t\t\t\t\t\tconst value = {\n\t\t\t\t\t\t\tdata: viewImage.getAttribute( 'srcset' )\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif ( viewImage.hasAttribute( 'width' ) ) {\n\t\t\t\t\t\t\tvalue.width = viewImage.getAttribute( 'width' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.add( viewFigureToModel() );\n\n\t\tconst insertImageCommand = new InsertImageCommand( editor );\n\n\t\t// Register `insertImage` command and add `imageInsert` command as an alias for backward compatibility.\n\t\teditor.commands.add( 'insertImage', insertImageCommand );\n\t\teditor.commands.add( 'imageInsert', insertImageCommand );\n\t}\n}\n\n// Creates a view element representing the image.\n//\n//\t\t<figure class=\"image\"><img></img></figure>\n//\n// Note that `alt` and `src` attributes are converted separately, so they are not included.\n//\n// @private\n// @param {module:engine/view/downcastwriter~DowncastWriter} writer\n// @returns {module:engine/view/containerelement~ContainerElement}\nexport function createImageViewElement( writer ) {\n\tconst emptyElement = writer.createEmptyElement( 'img' );\n\tconst figure = writer.createContainerElement( 'figure', { class: 'image' } );\n\n\twriter.insert( writer.createPositionAt( figure, 0 ), emptyElement );\n\n\treturn figure;\n}\n"]},"metadata":{},"sourceType":"module"}