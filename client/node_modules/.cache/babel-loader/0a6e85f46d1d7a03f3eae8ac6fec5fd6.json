{"ast":null,"code":"var _jsxFileName = \"/Users/subhasis/Desktop/React/Citryl/client/src/components/Login/OAuth.jsx\";\nimport React, { Component } from 'react';\nimport { API_URL } from '../../config/config';\nimport { GoogleLoginButton, TwitterLoginButton } from \"react-social-login-buttons\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class OAuth extends Component {\n  constructor(props) {\n    super(props);\n\n    this.startAuth = () => {\n      if (!this.state.disabled) {\n        this.popup = this.openPopup();\n        this.checkPopup();\n        this.setState({\n          disabled: 'disabled'\n        });\n      }\n    };\n\n    this._handleClick = this._handleClick.bind(this);\n    this.state = {\n      user: {},\n      disabled: ''\n    };\n  }\n\n  _handleClick() {\n    this.props.setUser('subhasis1', false);\n  }\n\n  componentDidMount() {\n    const {\n      socket,\n      provider\n    } = this.props;\n    socket.on(provider, user => {\n      this.popup.close();\n      this.setState({\n        user\n      });\n      this.props.setUser(user, true);\n      console.log(user.name);\n      socket.emit('chat message', user.name + ' is connected');\n    });\n  }\n\n  checkPopup() {\n    const check = setInterval(() => {\n      const {\n        popup\n      } = this;\n\n      if (!popup || popup.closed || popup.closed === undefined) {\n        clearInterval(check);\n        this.setState({\n          disabled: ''\n        });\n      }\n    }, 1000);\n  }\n\n  openPopup() {\n    const {\n      provider,\n      socket\n    } = this.props;\n    const width = 600,\n          height = 600;\n    const left = window.innerWidth / 2 - width / 2;\n    const top = window.innerHeight / 2 - height / 2;\n    const url = `${API_URL}/${provider}?socketId=${socket.id}`;\n    return window.open(url, '', `toolbar=no, location=no, directories=no, status=no, menubar=no, \n      scrollbars=no, resizable=no, copyhistory=no, width=${width}, \n      height=${height}, top=${top}, left=${left}`);\n  }\n\n  render() {\n    let socialButton;\n\n    if (this.props.provider == 'google') {\n      socialButton = /*#__PURE__*/_jsxDEV(GoogleLoginButton, {\n        onClick: this.startAuth\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 16\n      }, this);\n    } else {\n      socialButton = /*#__PURE__*/_jsxDEV(TwitterLoginButton, {\n        onClick: this.startAuth\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 16\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"col\",\n          children: socialButton\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"col\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"row\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 1\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 1\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/subhasis/Desktop/React/Citryl/client/src/components/Login/OAuth.jsx"],"names":["React","Component","API_URL","GoogleLoginButton","TwitterLoginButton","OAuth","constructor","props","startAuth","state","disabled","popup","openPopup","checkPopup","setState","_handleClick","bind","user","setUser","componentDidMount","socket","provider","on","close","console","log","name","emit","check","setInterval","closed","undefined","clearInterval","width","height","left","window","innerWidth","top","innerHeight","url","id","open","render","socialButton"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { API_URL } from '../../config/config'\nimport { GoogleLoginButton,TwitterLoginButton } from \"react-social-login-buttons\";\n\nexport default class OAuth extends Component {\n\n    constructor(props) {\n        super(props)\n        this._handleClick = this._handleClick.bind(this)\n\n        this.state = {\n            user: {},\n            disabled: ''\n          }  \n    }\n\n_handleClick()\n{\n    this.props.setUser('subhasis1',false)\n}\n\ncomponentDidMount() {\n    const { socket, provider } = this.props\n\n    socket.on(provider, user => {  \n      this.popup.close()\n      this.setState({user});\n      this.props.setUser(user,true);\n      console.log(user.name);\n      socket.emit('chat message',user.name + ' is connected');\n    })\n  }\n\n  checkPopup() {\n    const check = setInterval(() => {\n      const { popup } = this\n      if (!popup || popup.closed || popup.closed === undefined) {\n        clearInterval(check)\n        this.setState({ disabled: ''})\n      }\n    }, 1000)\n  }\n\n\n  openPopup() {\n    const { provider, socket } = this.props\n    const width = 600, height = 600\n    const left = (window.innerWidth / 2) - (width / 2)\n    const top = (window.innerHeight / 2) - (height / 2)\n    const url = `${API_URL}/${provider}?socketId=${socket.id}`\n\n    return window.open(url, '',       \n      `toolbar=no, location=no, directories=no, status=no, menubar=no, \n      scrollbars=no, resizable=no, copyhistory=no, width=${width}, \n      height=${height}, top=${top}, left=${left}`\n    )\n  }\n  startAuth = () => {\n    if (!this.state.disabled) {\n      this.popup = this.openPopup()  \n      this.checkPopup()\n      this.setState({disabled: 'disabled'})\n    }\n  }\n\nrender() {\n\nlet socialButton;\nif(this.props.provider == 'google')\n{\nsocialButton = <GoogleLoginButton onClick={this.startAuth}></GoogleLoginButton>;\n\n}\nelse\n{\nsocialButton = <TwitterLoginButton onClick={this.startAuth}></TwitterLoginButton>;\n}\n\nreturn(\n<div class=\"container\">\n<div class=\"row\">\n    <div class=\"col\">\n    {socialButton}\n\n    </div>\n    <div class=\"col\"></div>\n\n</div>\n<div class=\"row\"></div>\n</div>\n\n\n    \n)\n\n}\n\n}"]},"metadata":{},"sourceType":"module"}